<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Transplant</title>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
  <script type="text/javascript">
    var RULES = {{ rules|tojson|safe }};
    var REPOSITORIES = {{ repositories|tojson|safe }};
  </script>
</head>
  <body>
    <div class="container" style="margin-top: 1em; margin-bottom: 1em">
      <div>
        <h1>Transplant</h1>
        <form id="transplant-step-1" role="form">
          <h2>Step 1: choose commits</h2>
          <div class="form-group">
            <label for="source" class="control-label">Source</label>
            <select id="source" name="src" required="required" class="form-control">
              <option></option>
            </select>
            <p class="help-block">Source repository to transplant revision set from.</p>
          </div>
          <div class="form-group">
            <label for="destination" class="control-label">Destination</label>
            <select id="destination" name="dst" required="required" class="form-control">
              <option></option>
            </select>
            <p class="help-block">Destination repository to transplant revision set to.</p>
          </div>
          <div id="revset-form-group" class="form-group">
            <label for="revsets" class="control-label">Revision Sets (one per line)</label>
            <div class="row">
              <div class="col-md-10">
                <textarea id="revsets" name="revsets" required="required" class="form-control" rows="5"></textarea>
              </div>
              <div class="col-md-2">
                <button id="revset-lookup" class="btn btn-block btn-primary disabled" data-loading-text="Loading..." >Go</button>
              </div>
            </div>
            <p class="help-block">
              A list of Revision Sets to transplant from source to destination repository,
              see <a href="http://www.selenic.com/hg/help/revsets" target="_blank"><code>hg help revsets</code></a>
            </p>
          </div>
          <div>
            <label>Commits</label>
            <table id="table-commits" class="table table-condensed">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Date</th>
                  <th>Author</th>
                  <th>Message</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="4" class="text-center"><em>Fill in some Revision Sets above to populate this table.</em></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div>
            <button id="go-to-step-2" class="btn btn-primary btn-lg pull-right disabled">Next</button>
          </div>
        </form>
        <form id="transplant-step-2" role="form" class="hidden">
          <h2>Step 2: edit commit messages</h2>
          <h4>Source: <code id="step-2-src"></code></h4>
          <h4>Destination: <code id="step-2-dst"></code></h4>
          <div id="transplant-step-2-commits"></div>
          <div class="clearfix">
            <button id="go-to-step-1" class="btn btn-default btn-lg pull-left">Back</button>
            <button id="transplant" data-loading-text="Transplanting..." class="btn btn-primary btn-lg pull-right">Transplant</button>
          </div>
        </form>
        <p id="msgSuccess" class="text-success">Success</p>
        <p id="msgError" class="text-danger">Error</p>
      </div>
    </div>
    <script type="text/javascript" src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='main.js') }}"></script>
  </body>
</html>
